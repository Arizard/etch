{{- define "body-class" -}}single{{- end -}}
{{ define "main" }}
<div class="article-container">
<header class="post-header">
  <h1>{{ .Title }}</h1>
</header>
<div class="byline">
  <div class="author">{{- with .Params.Author -}}{{- . -}}{{- end -}}</div>
  {{- with .Page.Params.Date -}}<div><time>{{ .Format "2 January 2006" }}</time></div>{{- end -}}
  {{- if .Page.Params.hero_attribution -}}
  <div class="hero-attribution">
    <span>{{ .RenderString .Page.Params.hero_attribution }}</span>
  </div>
  {{- end -}}
</div>
{{- if .Page.Resources.Get .Params.hero -}}
<div class="hero-container">
    {{- with .Page.Resources.Get .Params.hero -}}
    {{- $heroImage := .Process "fit 800x3200 jpeg q85 box" -}}
    <div class="hero-img-surface" style="background-image: url('{{ $heroImage.Permalink }}');"></div>
    {{- end -}}
</div>
{{- end -}}
<article>
  {{- .Content -}}
</article>
</div>
{{- if not .Params.nocomment -}}
<div id="gomments-container">
</div>
{{- $reactBuilt := resources.Get "js/react.js" | js.Build (dict "minify" true "targetPath" "react.js") -}}
<script src="{{ $reactBuilt.RelPermalink }}" defer></script>
{{$gommentsBuildOpts := dict
"minify" (not hugo.IsDevelopment)
"sourceMap" (cond hugo.IsDevelopment "external" "")
"targetPath" "gomments.js"
}}
{{- $gommentsBuilt := resources.Get "js/react-gomments/index.jsx" | js.Build $gommentsBuildOpts -}}
<script src="{{ $gommentsBuilt.RelPermalink }}" defer></script>
{{- end -}}
{{ end }}

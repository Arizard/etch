{{ define "main" }}
<header class="post-header">
  <h1>{{ .Title }}</h1>
</header>
<article>
  {{- .Content -}}
</article>
{{- partial "front-matter.html" . -}}

{{- if not .Params.nobottomnav -}}
<div class="bottom-nav">
  <div class="bottom-nav-next">
    <div class="bottom-nav-label">Read next</div>
    {{ with .PrevInSection }}
    {{- partial "post-item.html" . -}}
    {{ else }}
    {{ with site.GetPage .Section }}
    {{ with index (.RegularPages.ByDate) (sub (len .RegularPages.ByDate) 1) }}
    {{- partial "post-item.html" . -}}
    {{ end }}
    {{ end }}
    {{ end }}
  </div>
</div>
{{ end }}

{{- if not .Params.nocomment -}}
<div id="gomments-container">
</div>
{{- $reactBuilt := resources.Get "js/react.js" | js.Build (dict "minify" true "targetPath" "react.js") -}}
<script src="{{ $reactBuilt.RelPermalink }}" defer></script>
{{$gommentsBuildOpts := dict
"minify" (not hugo.IsDevelopment)
"sourceMap" (cond hugo.IsDevelopment "external" "")
"targetPath" "gomments.js"
}}
{{- $gommentsBuilt := resources.Get "js/react-gomments/index.jsx" | js.Build $gommentsBuildOpts -}}
<script src="{{ $gommentsBuilt.RelPermalink }}" defer></script>
{{- end -}}
{{ end }}

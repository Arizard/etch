{{ define "body-class" }}index{{ end }}
{{ define "main" }}
<div class="about-me-container">
    <div class="about-me-intro">
        {{ .Content }}
    </div>
</div>
<h2>Featured</h2>
{{- $pages := where site.RegularPages.ByPublishDate.Reverse "Section" "posts" -}}
{{- $pages = where $pages "Draft" "ne" true }}
<div class="posts-list-container home featured">
    {{- range (where $pages "Params.featured" true) }}
    {{- partial "post-item.html" . -}}
    {{- end }}
</div>
<h2>Recent</h2>
<div class="posts-list-container home">
    {{- range (where $pages "Params.featured" "ne" true | first 4) }}
    {{- partial "post-item.html" . -}}
    {{- end }}
</div>
<div class="index-see-all-posts terms-cloud">
    {{- $postCount := (where site.RegularPages "Section" "posts").Len -}}
    <a class="terms-cloud-item" href="/posts/">see all {{ $postCount }} posts</a>
</div>
{{- if .Site.Params.tags_on_index -}}
<h2>Tags</h2>
<div class="tags-container">
    {{ with .Site.Taxonomies.tags.ByCount }}
    {{-
    $ctx := dict
    "tags" .
    "all" true
    -}}
    {{- partial "terms-cloud.html" $ctx -}}
    {{ end }}
</div>
{{- end -}}
{{ end }}
